<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Proyecto</title>
    <base href="/"/>
    <link rel="stylesheet" href="css/app.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="Proyecto.styles.css" rel="stylesheet" />
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>

    <script src="_framework/blazor.webassembly.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

<script>
    // Tu configuraciÃ³n de Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyAxh5OqfvzUIG2Esx--yqHvIa9j_kfrCdQ",
        authDomain: "storecambatech.firebaseapp.com",
        projectId: "storecambatech",
        storageBucket: "...",
        messagingSenderId: "...",
        appId: "...",
    };

    // Inicializa Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = app.auth();

    // ----------------------------------------------------
    // FUNCIÃ“N DE LOGIN QUE BLazor LLAMARÃ
    // ----------------------------------------------------
    window.firebaseLogin = async (username, password) => {
        try {
            const userCredential = await auth.signInWithEmailAndPassword(username, password);
            
            // Retorna un objeto simple con informaciÃ³n del usuario
            return {
                success: true,
                uid: userCredential.user.uid,
                email: userCredential.user.email
            };
        } catch (error) {
            // Retorna un objeto con el cÃ³digo de error
            return {
                success: false,
                code: error.code,
                message: error.message
            };
        }
    };

    // ----------------------------------------------------
    // FUNCIÃ“N DE LOGOUT QUE BLazor LLAMARÃ
    // ----------------------------------------------------
    window.firebaseLogout = async () => {
        try {
            await auth.signOut();
            return { success: true };
        } catch (error) {
            return { success: false, message: error.message };
        }
    };
</script>
</body>

</html>
